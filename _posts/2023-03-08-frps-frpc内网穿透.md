---
title: frps-frpcå†…ç½‘ç©¿é€
author: Travis <Hongxu Wei>
date: 2023-03-08 22:23:36 +0800
categories: [DailyNotes Space]
tags: [frp å†…ç½‘ç©¿é€]
math: false
---

ğŸ‘‡ frp githubé“¾æ¥

[GitHub - fatedier/frp: A fast reverse proxy to help you expose a local server behind a NAT or firewall to the internet.](https://github.com/fatedier/frp)

ğŸ‘‡ frp å®˜æ–¹ä½¿ç”¨æ–‡æ¡£

[æ¦‚è§ˆ | frp](https://gofrp.org/docs/overview/)

Tipsï¼šä¸€èˆ¬æœ‰å…¬ç½‘ipçš„æœåŠ¡å™¨ä½œæœåŠ¡ç«¯ã€éœ€è¦å†…ç½‘ç©¿é€çš„ä¸»æœºä½œå®¢æˆ·ç«¯

## 1. ä¸‹è½½

github releaseé¡µé¢ä¸­å†™åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äºŒè¿›åˆ¶æ–‡ä»¶
æœåŠ¡ç«¯ã€å®¢æˆ·ç«¯éƒ½éœ€è¦è¿›è¡Œä¸‹è½½å’Œéƒ¨ç½²

## 2. æœåŠ¡ç«¯éƒ¨ç½²

åœ¨å…·æœ‰å…¬ç½‘ IP çš„æœºå™¨ä¸Šéƒ¨ç½² frpsï¼Œä¿®æ”¹ frps.ini æ–‡ä»¶ï¼Œè¿™é‡Œä½¿ç”¨äº†æœ€ç®€åŒ–çš„é…ç½®ï¼Œè®¾ç½®äº† frp æœåŠ¡å™¨ç”¨æˆ·æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥çš„ç«¯å£ï¼š

```ini
[common]
bind_port = 7000
```

## 3.å®¢æˆ·ç«¯éƒ¨ç½²

åœ¨éœ€è¦è¢«è®¿é—®çš„å†…ç½‘æœºå™¨ä¸Šï¼ˆSSH æœåŠ¡é€šå¸¸ç›‘å¬åœ¨ 22 ç«¯å£ï¼‰éƒ¨ç½² frpcï¼Œä¿®æ”¹ frpc.ini æ–‡ä»¶ï¼Œå‡è®¾ frps æ‰€åœ¨æœåŠ¡å™¨çš„å…¬ç½‘ IP ä¸º x.x.x.xï¼š

```ini
[common]
server_addr = x.x.x.x
server_port = 7000

[ssh]
type = tcp
local_ip = 127.0.0.1
local_port = 22
remote_port = 6000
```

## 4.å¯åŠ¨

åˆ†åˆ«å¯åŠ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼Œæ³¨æ„å¯åŠ¨é¡ºåºï¼ï¼ï¼ï¼ˆå…ˆå¯åŠ¨æœåŠ¡ç«¯ï¼‰ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¼šè¿æ¥å¤±è´¥

```bash
frps -c frps.ini
frpc -c frpc.ini
```

## 5.è¿æ¥

é€šè¿‡ SSH è®¿é—®å†…ç½‘æœºå™¨ï¼Œå‡è®¾ç”¨æˆ·åä¸º testï¼š 

```bash
ssh -oPort=6000 test@x.x.x.x
```

---


**å¼€å¯è‡ªå¯åŠ¨**

ï¼ˆ1ï¼‰å®¢æˆ·ç«¯å®‰è£…systemd

```bash
# yum
yum install systemd
# apt
apt install systemd
```

ï¼ˆ2ï¼‰ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¦‚Â `vim`Â åˆ›å»ºå¹¶ç¼–è¾‘Â `frpc.service`Â æ–‡ä»¶ã€‚

```bash
vim /etc/systemd/system/frpc.service
```

å†™å…¥å†…å®¹

```
[Unit]
# æœåŠ¡åç§°ï¼Œå¯è‡ªå®šä¹‰
Description = frp server
After = network.target syslog.target
Wants = network.target

[Service]
Type = simple
# å¯åŠ¨frpsçš„å‘½ä»¤ï¼Œéœ€ä¿®æ”¹ä¸ºæ‚¨çš„frpsçš„å®‰è£…è·¯å¾„
ExecStart = /path/to/frpc -c /path/to/frpc.ini

[Install]
WantedBy = multi-user.target]
```

==æ³¨æ„ExecStartè·¯å¾„ä¸ºç»å¯¹è·¯å¾„==

ï¼ˆ3ï¼‰å¼€æœºå¾ªç¯å¯åŠ¨ï¼šå¯ä»¥è‡ªå·±å†™ä¸ªè„šæœ¬ or åœ¨Serviceä¸­è®¾ç½®l

==è„šæœ¬chmod +xç»™æƒé™==

```bash
#!/bin/bash

function start()
{
        echo "starting"
        /home/firefly/frp/frp_0.47.0_linux_arm64/frpc -c /home/firefly/frp/frp_0.47.0_linux_arm64/frpc.ini
}
start
while [ $? -ne 0 ]
do
        echo "start failed, sleep 1m, start again"
        sleep 1m
        start
done
```

ï¼ˆ4ï¼‰ä½¿ç”¨systemdå‘½ä»¤ï¼Œç®¡ç†frpc

```bash
# å¯åŠ¨frp
systemctl start frpc
# åœæ­¢frp
systemctl stop frpc
# é‡å¯frp
systemctl restart frpc
# æŸ¥çœ‹frpçŠ¶æ€
systemctl status frpc
```

ï¼ˆ5ï¼‰é…ç½®å¼€æœºè‡ªå¯åŠ¨

```bash
sudo systemctl daemon-reload

systemctl enable frpc
```
