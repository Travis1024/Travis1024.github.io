---
title: ”懒汉式“单例模式-双重检查锁(DCL)问题
author: Travis <Hongxu Wei>
date: 2023-06-26 10:25:08 +0800
categories: [Java Learning Space]
tags: [单例模式, volatile]
math: false
---



[参考：双重检查锁问题](https://blog.csdn.net/Dongguabai/article/details/82828125)





- 指令重排序

  为了使处理器内部的运算单元能尽量被充分利用，处理器可能会对输入的代码进行乱序执行优化，处理器会在计算之后将乱序执行的结果重组，并确保这一结果和顺序执行结果是一致的，但是这个过程并不保证各个语句计算的先后顺序和输入代码中的顺序一致。这就是指令重排序。

  **简单来说，就是指你在程序中写的代码，在执行时并不一定按照写的顺序。**

  在Java中，JVM能够根据处理器特性（CPU多级缓存系统、多核处理器等）适当对机器指令进行重排序，最大限度发挥机器性能。

  Java中的指令重排序有两次，第一次发生在将字节码编译成机器码的阶段，第二次发生在CPU执行的时候，也会适当对指令进行重排。